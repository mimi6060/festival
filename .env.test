# =============================================================================
# FESTIVAL PLATFORM - TEST ENVIRONMENT
# =============================================================================
# This file contains test-specific configuration.
# Used by Jest and E2E tests. Uses separate database to avoid data conflicts.
# =============================================================================

# Application
NODE_ENV=test
APP_NAME="Festival Platform (Test)"
APP_URL=http://localhost:3000
API_URL=http://localhost:3333
ADMIN_URL=http://localhost:4201
PORT=3333
API_PREFIX=api
API_VERSION=v1
DEBUG=false

# Database - Separate test database
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=festival_test
DATABASE_USER=festival_user
DATABASE_PASSWORD=festival_dev_password
DATABASE_URL=postgresql://festival_user:festival_dev_password@localhost:5432/festival_test?schema=public
DATABASE_POOL_MIN=1
DATABASE_POOL_MAX=5
DATABASE_SSL_ENABLED=false

# Redis - Separate DB for tests
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=1
REDIS_URL=redis://localhost:6379/1
CACHE_TTL=60

# JWT Authentication (Fixed secrets for reproducible tests)
JWT_SECRET=test_jwt_secret_fixed_for_reproducible_tests_32
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=test_jwt_refresh_secret_fixed_for_tests_32ch
JWT_REFRESH_EXPIRES_IN=1d
JWT_ISSUER=festival-api-test
JWT_AUDIENCE=festival-app-test
BCRYPT_SALT_ROUNDS=4

# Stripe (Mock/Test Mode)
STRIPE_SECRET_KEY=sk_test_mock_key_for_testing
STRIPE_PUBLISHABLE_KEY=pk_test_mock_key_for_testing
STRIPE_WEBHOOK_SECRET=whsec_mock_webhook_secret_for_testing
STRIPE_CURRENCY=eur

# Email - Disabled/Mocked in tests
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_NAME="Festival Platform (Test)"
SMTP_FROM_EMAIL=test@festival-platform.local

# File Storage - Memory/Temp for tests
STORAGE_TYPE=local
UPLOAD_LOCAL_PATH=./test-uploads
UPLOAD_BASE_URL=/uploads
UPLOAD_MAX_SIZE=10485760
UPLOAD_MAX_IMAGE_SIZE=5242880

# AWS/S3 - Mocked in tests
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=test_access_key
AWS_SECRET_ACCESS_KEY=test_secret_key
AWS_S3_BUCKET=festival-test-uploads
AWS_S3_ENDPOINT=http://localhost:9000

# Push Notifications (Mocked)
FIREBASE_ENABLED=false
APNS_ENABLED=false

# Sentry (Disabled)
SENTRY_ENABLED=false
SENTRY_DSN=

# Security (Relaxed for testing)
CORS_ORIGINS=*
RATE_LIMIT_ENABLED=false
CSRF_ENABLED=false
QR_SECRET=test_qr_secret_fixed_for_testing_32chars
ENCRYPTION_KEY=test_encryption_key_32bytes_here

# Logging (Minimal for clean test output)
LOG_LEVEL=error
LOG_FORMAT=json
LOG_DIR=./test-logs
LOG_REQUESTS=false
LOG_RESPONSES=false
LOG_BODY=false

# Prometheus (Disabled in tests)
PROMETHEUS_ENABLED=false

# Feature Flags
FEATURE_REGISTRATION_ENABLED=true
FEATURE_PAYMENT_ENABLED=true
FEATURE_CASHLESS_ENABLED=true
FEATURE_PUSH_NOTIFICATIONS_ENABLED=false
FEATURE_SMS_NOTIFICATIONS_ENABLED=false
FEATURE_OAUTH_ENABLED=false
FEATURE_API_DOCS_ENABLED=false
FEATURE_GRAPHQL_ENABLED=false

# Queue (Disabled for synchronous tests)
QUEUE_ENABLED=false

# Test Admin account
ADMIN_EMAIL=admin@test.local
ADMIN_PASSWORD=testadmin123
ADMIN_FIRST_NAME=Test
ADMIN_LAST_NAME=Admin

# Swagger (Disabled in tests)
SWAGGER_ENABLED=false

# E2E Test Settings
E2E_BASE_URL=http://localhost:3333
E2E_TIMEOUT=30000
E2E_RETRY_COUNT=3

# Test Users (Seeded for E2E tests)
TEST_USER_EMAIL=testuser@test.local
TEST_USER_PASSWORD=testuser123
TEST_ORGANIZER_EMAIL=organizer@test.local
TEST_ORGANIZER_PASSWORD=organizer123
