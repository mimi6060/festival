{{!--
  Password Reset Template
  Sent when user requests a password reset

  Variables:
  - userName: User's first name or full name
  - userEmail: User's email address
  - resetUrl: URL to reset password
  - expiresIn: Expiration time (e.g., "1 heure" / "1 hour")
  - ipAddress: IP address of the request (optional)
  - userAgent: Browser/device info (optional)
  - requestedAt: Date/time of request
  - location: Geographic location (optional)
  - festivalName: Name of the festival
  - supportEmail: Support email address
  - lang_fr: Boolean for French language
  - primaryColor: Brand primary color
  - secondaryColor: Brand secondary color
--}}

{{#if lang_fr}}
<!-- French Version -->

<!-- Hero Section with Lock Icon -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-bottom: 30px;">
  <tr>
    <td align="center">
      <table border="0" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%); border-radius: 12px; padding: 30px 40px;">
        <tr>
          <td align="center">
            <span style="display: inline-block; width: 70px; height: 70px; background-color: rgba(255,255,255,0.2); border-radius: 50%; line-height: 70px; font-size: 32px;">
              &#128274;
            </span>
          </td>
        </tr>
        <tr>
          <td align="center" style="padding-top: 15px;">
            <h1 style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 24px; font-weight: 700; color: #ffffff;">
              Reinitialisation du mot de passe
            </h1>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>

<p style="margin: 0 0 20px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 16px; color: #4a4a4a; line-height: 26px;">
  Bonjour <strong>{{userName}}</strong>,
</p>

<p style="margin: 0 0 25px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 16px; color: #4a4a4a; line-height: 26px;">
  Nous avons recu une demande de reinitialisation de votre mot de passe pour votre compte <strong>{{festivalName}}</strong>. Cliquez sur le bouton ci-dessous pour creer un nouveau mot de passe securise.
</p>

<!-- Main CTA Button -->
{{> button
  url=resetUrl
  text="Reinitialiser mon mot de passe"
  align="center"
  buttonColor="#4f46e5"
  showFallback=true
}}

<!-- Expiration Warning -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin: 25px 0;">
  <tr>
    <td style="padding: 16px 20px; background-color: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b;">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="width: 35px; vertical-align: top;">
            <span style="font-size: 20px;">&#9200;</span>
          </td>
          <td>
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; color: #92400e; line-height: 22px;">
              <strong>Ce lien expire dans {{expiresIn}}.</strong><br>
              Passe ce delai, vous devrez effectuer une nouvelle demande de reinitialisation.
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>

<!-- Request Details -->
{{#if ipAddress}}
<h2 style="margin: 30px 0 15px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 18px; font-weight: 600; color: #1a1a2e;">
  &#128270; Details de la demande
</h2>

<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-bottom: 25px; background-color: #f8f9fa; border-radius: 8px; overflow: hidden;">
  <tr>
    <td style="padding: 15px 20px; border-bottom: 1px solid #e0e0e0;">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="width: 35px; vertical-align: middle;">
            <span style="font-size: 18px;">&#128197;</span>
          </td>
          <td>
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; color: #8c8c8c;">
              Date et heure
            </p>
            <p style="margin: 2px 0 0 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; color: #1a1a2e;">
              {{requestedAt}}
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td style="padding: 15px 20px; border-bottom: 1px solid #e0e0e0;">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="width: 35px; vertical-align: middle;">
            <span style="font-size: 18px;">&#127760;</span>
          </td>
          <td>
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; color: #8c8c8c;">
              Adresse IP
            </p>
            <p style="margin: 2px 0 0 0; font-family: 'Courier New', monospace; font-size: 14px; color: #1a1a2e;">
              {{ipAddress}}
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  {{#if userAgent}}
  <tr>
    <td style="padding: 15px 20px; {{#if location}}border-bottom: 1px solid #e0e0e0;{{/if}}">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="width: 35px; vertical-align: middle;">
            <span style="font-size: 18px;">&#128187;</span>
          </td>
          <td>
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; color: #8c8c8c;">
              Appareil
            </p>
            <p style="margin: 2px 0 0 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; color: #1a1a2e;">
              {{userAgent}}
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  {{/if}}
  {{#if location}}
  <tr>
    <td style="padding: 15px 20px;">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="width: 35px; vertical-align: middle;">
            <span style="font-size: 18px;">&#128205;</span>
          </td>
          <td>
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; color: #8c8c8c;">
              Localisation approximative
            </p>
            <p style="margin: 2px 0 0 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; color: #1a1a2e;">
              {{location}}
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  {{/if}}
</table>
{{/if}}

<!-- Password Tips -->
{{> info-box
  title="Conseils pour un mot de passe securise"
  icon="&#128161;"
  content="<ul style='margin: 0; padding-left: 20px;'>
    <li style='margin-bottom: 6px;'>Utilisez au moins 12 caracteres</li>
    <li style='margin-bottom: 6px;'>Melangez lettres, chiffres et symboles</li>
    <li style='margin-bottom: 6px;'>Evitez les informations personnelles</li>
    <li>Utilisez un gestionnaire de mots de passe</li>
  </ul>"
}}

<!-- Security Warning -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin: 25px 0;">
  <tr>
    <td style="padding: 16px 20px; background-color: #fef2f2; border-radius: 8px; border-left: 4px solid #dc2626;">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="width: 35px; vertical-align: top;">
            <span style="font-size: 20px;">&#9888;&#65039;</span>
          </td>
          <td>
            <p style="margin: 0 0 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; color: #991b1b; font-weight: 600;">
              Vous n'avez pas fait cette demande ?
            </p>
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; color: #991b1b; line-height: 22px;">
              Si vous n'avez pas demande de reinitialisation, ignorez cet email. Votre mot de passe restera inchange. Si vous pensez que quelqu'un tente d'acceder a votre compte,
              <a href="mailto:{{supportEmail}}" style="color: #991b1b; font-weight: 600;">contactez notre support</a> immediatement.
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>

{{else}}
<!-- English Version -->

<!-- Hero Section with Lock Icon -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-bottom: 30px;">
  <tr>
    <td align="center">
      <table border="0" cellpadding="0" cellspacing="0" style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%); border-radius: 12px; padding: 30px 40px;">
        <tr>
          <td align="center">
            <span style="display: inline-block; width: 70px; height: 70px; background-color: rgba(255,255,255,0.2); border-radius: 50%; line-height: 70px; font-size: 32px;">
              &#128274;
            </span>
          </td>
        </tr>
        <tr>
          <td align="center" style="padding-top: 15px;">
            <h1 style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 24px; font-weight: 700; color: #ffffff;">
              Password Reset
            </h1>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>

<p style="margin: 0 0 20px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 16px; color: #4a4a4a; line-height: 26px;">
  Hi <strong>{{userName}}</strong>,
</p>

<p style="margin: 0 0 25px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 16px; color: #4a4a4a; line-height: 26px;">
  We received a request to reset your password for your <strong>{{festivalName}}</strong> account. Click the button below to create a new secure password.
</p>

<!-- Main CTA Button -->
{{> button
  url=resetUrl
  text="Reset my password"
  align="center"
  buttonColor="#4f46e5"
  showFallback=true
}}

<!-- Expiration Warning -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin: 25px 0;">
  <tr>
    <td style="padding: 16px 20px; background-color: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b;">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="width: 35px; vertical-align: top;">
            <span style="font-size: 20px;">&#9200;</span>
          </td>
          <td>
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; color: #92400e; line-height: 22px;">
              <strong>This link expires in {{expiresIn}}.</strong><br>
              After that, you'll need to submit a new reset request.
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>

<!-- Request Details -->
{{#if ipAddress}}
<h2 style="margin: 30px 0 15px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 18px; font-weight: 600; color: #1a1a2e;">
  &#128270; Request details
</h2>

<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin-bottom: 25px; background-color: #f8f9fa; border-radius: 8px; overflow: hidden;">
  <tr>
    <td style="padding: 15px 20px; border-bottom: 1px solid #e0e0e0;">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="width: 35px; vertical-align: middle;">
            <span style="font-size: 18px;">&#128197;</span>
          </td>
          <td>
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; color: #8c8c8c;">
              Date and time
            </p>
            <p style="margin: 2px 0 0 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; color: #1a1a2e;">
              {{requestedAt}}
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td style="padding: 15px 20px; border-bottom: 1px solid #e0e0e0;">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="width: 35px; vertical-align: middle;">
            <span style="font-size: 18px;">&#127760;</span>
          </td>
          <td>
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; color: #8c8c8c;">
              IP Address
            </p>
            <p style="margin: 2px 0 0 0; font-family: 'Courier New', monospace; font-size: 14px; color: #1a1a2e;">
              {{ipAddress}}
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  {{#if userAgent}}
  <tr>
    <td style="padding: 15px 20px; {{#if location}}border-bottom: 1px solid #e0e0e0;{{/if}}">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="width: 35px; vertical-align: middle;">
            <span style="font-size: 18px;">&#128187;</span>
          </td>
          <td>
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; color: #8c8c8c;">
              Device
            </p>
            <p style="margin: 2px 0 0 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; color: #1a1a2e;">
              {{userAgent}}
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  {{/if}}
  {{#if location}}
  <tr>
    <td style="padding: 15px 20px;">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="width: 35px; vertical-align: middle;">
            <span style="font-size: 18px;">&#128205;</span>
          </td>
          <td>
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 12px; color: #8c8c8c;">
              Approximate location
            </p>
            <p style="margin: 2px 0 0 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; color: #1a1a2e;">
              {{location}}
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
  {{/if}}
</table>
{{/if}}

<!-- Password Tips -->
{{> info-box
  title="Tips for a secure password"
  icon="&#128161;"
  content="<ul style='margin: 0; padding-left: 20px;'>
    <li style='margin-bottom: 6px;'>Use at least 12 characters</li>
    <li style='margin-bottom: 6px;'>Mix letters, numbers, and symbols</li>
    <li style='margin-bottom: 6px;'>Avoid personal information</li>
    <li>Use a password manager</li>
  </ul>"
}}

<!-- Security Warning -->
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin: 25px 0;">
  <tr>
    <td style="padding: 16px 20px; background-color: #fef2f2; border-radius: 8px; border-left: 4px solid #dc2626;">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="width: 35px; vertical-align: top;">
            <span style="font-size: 20px;">&#9888;&#65039;</span>
          </td>
          <td>
            <p style="margin: 0 0 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; color: #991b1b; font-weight: 600;">
              Didn't request this?
            </p>
            <p style="margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; color: #991b1b; line-height: 22px;">
              If you didn't request a password reset, please ignore this email. Your password will remain unchanged. If you believe someone is trying to access your account,
              <a href="mailto:{{supportEmail}}" style="color: #991b1b; font-weight: 600;">contact our support team</a> immediately.
            </p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
{{/if}}
