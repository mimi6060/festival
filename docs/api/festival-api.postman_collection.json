{
  "info": {
    "name": "Festival Platform API",
    "description": "Complete API collection for the Festival Management Platform.\n\n## Getting Started\n\n1. Import this collection into Postman\n2. Import the environment file (festival-api.postman_environment.json)\n3. Run the \"Login\" request to get tokens\n4. Other requests will automatically use the saved tokens\n\n## Authentication\n\nMost endpoints require authentication. After logging in, the access token is automatically saved to the environment.\n\n## Variables\n\n- `{{baseUrl}}` - API base URL\n- `{{accessToken}}` - JWT access token (auto-saved)\n- `{{refreshToken}}` - Refresh token (auto-saved)\n- `{{festivalId}}` - Current festival ID\n- `{{ticketId}}` - Current ticket ID",
    "_postman_id": "festival-platform-api-v1",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": {
      "major": 1,
      "minor": 0,
      "patch": 0
    }
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3333/api",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health",
      "description": "System health check endpoints",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            },
            "description": "Basic health check endpoint. Returns 200 if the API is running."
          },
          "response": [
            {
              "name": "Healthy",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"status\": \"ok\",\n  \"timestamp\": \"2025-01-02T12:00:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "Liveness Probe",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health/live",
              "host": ["{{baseUrl}}"],
              "path": ["health", "live"]
            },
            "description": "Kubernetes liveness probe. Returns 200 if the application is alive."
          },
          "response": []
        },
        {
          "name": "Readiness Probe",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health/ready",
              "host": ["{{baseUrl}}"],
              "path": ["health", "ready"]
            },
            "description": "Kubernetes readiness probe. Returns 200 if the application is ready to receive traffic."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Auth",
      "description": "Authentication and authorization endpoints",
      "item": [
        {
          "name": "Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('userId', response.user.id);",
                  "    console.log('User registered:', response.user.email);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"phone\": \"+33612345678\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            },
            "description": "Register a new user account. After registration, the user must verify their email before logging in."
          },
          "response": [
            {
              "name": "Success",
              "status": "Created",
              "code": 201,
              "body": "{\n  \"user\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"email\": \"test@example.com\",\n    \"firstName\": \"Test\",\n    \"lastName\": \"User\",\n    \"role\": \"ATTENDEE\",\n    \"emailVerified\": false,\n    \"createdAt\": \"2025-01-02T12:00:00.000Z\"\n  },\n  \"message\": \"Registration successful. Please check your email to verify your account.\"\n}"
            }
          ]
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.tokens.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.tokens.refreshToken);",
                  "    pm.collectionVariables.set('userId', response.user.id);",
                  "    console.log('Logged in as:', response.user.email);",
                  "    console.log('Token expires in:', response.tokens.expiresIn, 'seconds');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"SecurePass123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Login with email and password. Returns access and refresh tokens."
          },
          "response": [
            {
              "name": "Success",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"user\": {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"email\": \"test@example.com\",\n    \"firstName\": \"Test\",\n    \"lastName\": \"User\",\n    \"role\": \"ATTENDEE\",\n    \"emailVerified\": true,\n    \"createdAt\": \"2025-01-02T12:00:00.000Z\"\n  },\n  \"tokens\": {\n    \"accessToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n    \"refreshToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n    \"expiresIn\": 900,\n    \"tokenType\": \"Bearer\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "me"]
            },
            "description": "Get the currently authenticated user's profile."
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    console.log('Tokens refreshed');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            },
            "description": "Exchange a refresh token for new access and refresh tokens."
          },
          "response": []
        },
        {
          "name": "Logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    pm.collectionVariables.unset('accessToken');",
                  "    pm.collectionVariables.unset('refreshToken');",
                  "    console.log('Logged out');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            },
            "description": "Logout the current session and invalidate the refresh token."
          },
          "response": []
        },
        {
          "name": "Forgot Password",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/forgot-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "forgot-password"]
            },
            "description": "Request a password reset email."
          },
          "response": []
        },
        {
          "name": "Reset Password",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"reset-token-from-email\",\n  \"newPassword\": \"NewSecurePass456!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/reset-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "reset-password"]
            },
            "description": "Reset password using the token from the reset email."
          },
          "response": []
        },
        {
          "name": "Change Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"SecurePass123!\",\n  \"newPassword\": \"NewSecurePass456!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/change-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "change-password"]
            },
            "description": "Change password for the authenticated user."
          },
          "response": []
        },
        {
          "name": "Verify Email",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"verification-token-from-email\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/verify-email",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "verify-email"]
            },
            "description": "Verify email address using the token from the verification email."
          },
          "response": []
        },
        {
          "name": "Resend Verification Email",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/resend-verification",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "resend-verification"]
            },
            "description": "Resend the email verification link."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Users",
      "description": "User management endpoints (Admin)",
      "item": [
        {
          "name": "List Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users?page=1&limit=20&role=ATTENDEE&status=ACTIVE",
              "host": ["{{baseUrl}}"],
              "path": ["users"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "role",
                  "value": "ATTENDEE"
                },
                {
                  "key": "status",
                  "value": "ACTIVE"
                }
              ]
            },
            "description": "List all users with pagination and filters. Requires ADMIN role."
          },
          "response": []
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}"]
            },
            "description": "Get a user by their ID."
          },
          "response": []
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Updated\",\n  \"lastName\": \"Name\",\n  \"phone\": \"+33698765432\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}"]
            },
            "description": "Update a user's profile."
          },
          "response": []
        },
        {
          "name": "Ban User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Violation of terms of service\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}/ban",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}", "ban"]
            },
            "description": "Ban a user. Requires ADMIN role."
          },
          "response": []
        },
        {
          "name": "Unban User",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}/unban",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}", "unban"]
            },
            "description": "Unban a user. Requires ADMIN role."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Festivals",
      "description": "Festival management endpoints",
      "item": [
        {
          "name": "List Festivals",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/festivals?status=PUBLISHED&country=FR&page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["festivals"],
              "query": [
                {
                  "key": "status",
                  "value": "PUBLISHED"
                },
                {
                  "key": "country",
                  "value": "FR"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "List all published festivals. Public endpoint."
          },
          "response": []
        },
        {
          "name": "Create Festival",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('festivalId', response.id);",
                  "    pm.collectionVariables.set('festivalSlug', response.slug);",
                  "    console.log('Festival created:', response.name);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Summer Vibes Festival 2025\",\n  \"shortDescription\": \"The biggest electronic music festival in France\",\n  \"description\": \"## About Summer Vibes\\n\\nJoin us for 3 days of incredible music featuring world-class DJs and live performances.\",\n  \"startDate\": \"2025-07-15T14:00:00.000Z\",\n  \"endDate\": \"2025-07-17T23:00:00.000Z\",\n  \"location\": {\n    \"venueName\": \"Parc des Expositions\",\n    \"address\": \"1 Place de la Porte de Versailles\",\n    \"city\": \"Paris\",\n    \"state\": \"Ile-de-France\",\n    \"country\": \"FR\",\n    \"postalCode\": \"75015\",\n    \"latitude\": 48.8323,\n    \"longitude\": 2.2885\n  },\n  \"capacity\": 50000,\n  \"website\": \"https://summervibes.example.com\",\n  \"coverImage\": \"https://cdn.example.com/cover.jpg\",\n  \"logo\": \"https://cdn.example.com/logo.png\",\n  \"primaryColor\": \"#FF6B35\",\n  \"tags\": [\"electronic\", \"techno\", \"house\", \"outdoor\"],\n  \"contactEmail\": \"contact@summervibes.com\",\n  \"timezone\": \"Europe/Paris\",\n  \"currency\": \"EUR\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/festivals",
              "host": ["{{baseUrl}}"],
              "path": ["festivals"]
            },
            "description": "Create a new festival. Requires ORGANIZER or ADMIN role."
          },
          "response": []
        },
        {
          "name": "Get Festival by ID",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}"]
            },
            "description": "Get festival details by ID."
          },
          "response": []
        },
        {
          "name": "Get Festival by Slug",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/festivals/by-slug/{{festivalSlug}}",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "by-slug", "{{festivalSlug}}"]
            },
            "description": "Get festival details by URL slug."
          },
          "response": []
        },
        {
          "name": "Update Festival",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Summer Vibes Festival 2025 - Updated\",\n  \"capacity\": 60000\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}"]
            },
            "description": "Update a festival. Requires ORGANIZER or ADMIN role."
          },
          "response": []
        },
        {
          "name": "Publish Festival",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}/publish",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}", "publish"]
            },
            "description": "Publish a festival (change status from DRAFT to PUBLISHED)."
          },
          "response": []
        },
        {
          "name": "Get Festival Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}/stats",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}", "stats"]
            },
            "description": "Get comprehensive statistics for a festival."
          },
          "response": []
        },
        {
          "name": "Cancel Festival",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}/cancel",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}", "cancel"]
            },
            "description": "Cancel a festival. This initiates the refund process."
          },
          "response": []
        },
        {
          "name": "Delete Festival",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}"]
            },
            "description": "Delete a festival. Cannot delete if tickets have been sold."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Tickets",
      "description": "Ticket management endpoints",
      "item": [
        {
          "name": "List Ticket Categories",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}/tickets/categories",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}", "tickets", "categories"]
            },
            "description": "List all ticket categories for a festival."
          },
          "response": []
        },
        {
          "name": "Create Ticket Category",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('ticketCategoryId', response.id);",
                  "    console.log('Category created:', response.name);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"3-Day VIP Pass\",\n  \"description\": \"Full access VIP pass for all 3 days\",\n  \"price\": 29900,\n  \"currency\": \"EUR\",\n  \"quantity\": 1000,\n  \"maxPerOrder\": 4,\n  \"type\": \"VIP\",\n  \"validFrom\": \"2025-07-15T14:00:00.000Z\",\n  \"validTo\": \"2025-07-17T23:00:00.000Z\",\n  \"salesStart\": \"2025-01-01T00:00:00.000Z\",\n  \"salesEnd\": \"2025-07-14T23:59:59.000Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}/tickets/categories",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}", "tickets", "categories"]
            },
            "description": "Create a new ticket category. Requires ORGANIZER or ADMIN role."
          },
          "response": []
        },
        {
          "name": "Purchase Tickets",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('ticketId', response.tickets[0].id);",
                  "    pm.collectionVariables.set('checkoutUrl', response.checkoutUrl);",
                  "    console.log('Tickets purchased:', response.tickets.length);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"festivalId\": \"{{festivalId}}\",\n  \"categoryId\": \"{{ticketCategoryId}}\",\n  \"quantity\": 2,\n  \"successUrl\": \"https://example.com/success\",\n  \"cancelUrl\": \"https://example.com/cancel\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tickets/purchase",
              "host": ["{{baseUrl}}"],
              "path": ["tickets", "purchase"]
            },
            "description": "Purchase tickets. Returns a Stripe checkout URL."
          },
          "response": []
        },
        {
          "name": "Get My Tickets",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tickets/me",
              "host": ["{{baseUrl}}"],
              "path": ["tickets", "me"]
            },
            "description": "Get all tickets for the authenticated user."
          },
          "response": []
        },
        {
          "name": "Get Ticket Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tickets/{{ticketId}}",
              "host": ["{{baseUrl}}"],
              "path": ["tickets", "{{ticketId}}"]
            },
            "description": "Get detailed information about a specific ticket."
          },
          "response": []
        },
        {
          "name": "Get Ticket QR Code",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tickets/{{ticketId}}/qr",
              "host": ["{{baseUrl}}"],
              "path": ["tickets", "{{ticketId}}", "qr"]
            },
            "description": "Get the QR code for a ticket (returns image or base64)."
          },
          "response": []
        },
        {
          "name": "Validate Ticket (Scan)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"qrCode\": \"QR_DATA_FROM_SCAN\",\n  \"zoneId\": \"{{zoneId}}\",\n  \"type\": \"ENTRY\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tickets/validate",
              "host": ["{{baseUrl}}"],
              "path": ["tickets", "validate"]
            },
            "description": "Validate a ticket by scanning its QR code. Requires STAFF or ADMIN role."
          },
          "response": []
        },
        {
          "name": "Cancel Ticket",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Cannot attend\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tickets/{{ticketId}}/cancel",
              "host": ["{{baseUrl}}"],
              "path": ["tickets", "{{ticketId}}", "cancel"]
            },
            "description": "Request ticket cancellation and refund."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Payments",
      "description": "Payment processing endpoints",
      "item": [
        {
          "name": "Create Checkout Session",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"ticket_purchase\",\n  \"items\": [\n    {\n      \"categoryId\": \"{{ticketCategoryId}}\",\n      \"quantity\": 2\n    }\n  ],\n  \"successUrl\": \"https://example.com/success?session_id={CHECKOUT_SESSION_ID}\",\n  \"cancelUrl\": \"https://example.com/cancel\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payments/create-session",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "create-session"]
            },
            "description": "Create a Stripe checkout session for payment."
          },
          "response": []
        },
        {
          "name": "Get My Payments",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payments/me?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "me"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "Get payment history for the authenticated user."
          },
          "response": []
        },
        {
          "name": "Get Payment Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payments/{{paymentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "{{paymentId}}"]
            },
            "description": "Get details of a specific payment."
          },
          "response": []
        },
        {
          "name": "Request Refund",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Event cancelled\",\n  \"amount\": 29900\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payments/{{paymentId}}/refund",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "{{paymentId}}", "refund"]
            },
            "description": "Request a refund for a payment."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Cashless",
      "description": "Cashless wallet endpoints",
      "item": [
        {
          "name": "Get My Cashless Account",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cashless/account?festivalId={{festivalId}}",
              "host": ["{{baseUrl}}"],
              "path": ["cashless", "account"],
              "query": [
                {
                  "key": "festivalId",
                  "value": "{{festivalId}}"
                }
              ]
            },
            "description": "Get cashless account balance and details for a festival."
          },
          "response": []
        },
        {
          "name": "Top Up Balance",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"festivalId\": \"{{festivalId}}\",\n  \"amount\": 5000,\n  \"successUrl\": \"https://example.com/topup/success\",\n  \"cancelUrl\": \"https://example.com/topup/cancel\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cashless/topup",
              "host": ["{{baseUrl}}"],
              "path": ["cashless", "topup"]
            },
            "description": "Top up cashless account balance. Returns Stripe checkout URL."
          },
          "response": []
        },
        {
          "name": "Make Cashless Payment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"festivalId\": \"{{festivalId}}\",\n  \"vendorId\": \"{{vendorId}}\",\n  \"amount\": 850,\n  \"items\": [\n    {\n      \"name\": \"Burger\",\n      \"quantity\": 1,\n      \"unitPrice\": 650\n    },\n    {\n      \"name\": \"Beer\",\n      \"quantity\": 1,\n      \"unitPrice\": 200\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cashless/pay",
              "host": ["{{baseUrl}}"],
              "path": ["cashless", "pay"]
            },
            "description": "Make a cashless payment to a vendor. Requires ATTENDEE with valid ticket."
          },
          "response": []
        },
        {
          "name": "Get Transactions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cashless/transactions?festivalId={{festivalId}}&page=1&limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["cashless", "transactions"],
              "query": [
                {
                  "key": "festivalId",
                  "value": "{{festivalId}}"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            },
            "description": "Get cashless transaction history."
          },
          "response": []
        },
        {
          "name": "Transfer Balance",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"festivalId\": \"{{festivalId}}\",\n  \"recipientEmail\": \"friend@example.com\",\n  \"amount\": 1000\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cashless/transfer",
              "host": ["{{baseUrl}}"],
              "path": ["cashless", "transfer"]
            },
            "description": "Transfer balance to another user at the same festival."
          },
          "response": []
        },
        {
          "name": "Link NFC Tag",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"festivalId\": \"{{festivalId}}\",\n  \"nfcTagId\": \"NFC_TAG_SERIAL_NUMBER\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cashless/link-nfc",
              "host": ["{{baseUrl}}"],
              "path": ["cashless", "link-nfc"]
            },
            "description": "Link an NFC tag or wristband to the cashless account."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Zones",
      "description": "Zone and access control endpoints",
      "item": [
        {
          "name": "List Zones",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}/zones",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}", "zones"]
            },
            "description": "List all zones for a festival."
          },
          "response": []
        },
        {
          "name": "Create Zone",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('zoneId', response.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Main Stage\",\n  \"type\": \"STAGE\",\n  \"capacity\": 20000,\n  \"accessLevel\": \"GENERAL\",\n  \"description\": \"Main performance stage\",\n  \"coordinates\": {\n    \"latitude\": 48.8323,\n    \"longitude\": 2.2885\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}/zones",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}", "zones"]
            },
            "description": "Create a new zone. Requires ORGANIZER or ADMIN role."
          },
          "response": []
        },
        {
          "name": "Get Zone Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/zones/{{zoneId}}",
              "host": ["{{baseUrl}}"],
              "path": ["zones", "{{zoneId}}"]
            },
            "description": "Get zone details including current occupancy."
          },
          "response": []
        },
        {
          "name": "Scan Entry/Exit",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"qrCode\": \"QR_DATA_FROM_SCAN\",\n  \"type\": \"ENTRY\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/zones/{{zoneId}}/scan",
              "host": ["{{baseUrl}}"],
              "path": ["zones", "{{zoneId}}", "scan"]
            },
            "description": "Scan ticket for zone entry or exit. Requires STAFF role."
          },
          "response": []
        },
        {
          "name": "Get Zone Occupancy",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/zones/{{zoneId}}/count",
              "host": ["{{baseUrl}}"],
              "path": ["zones", "{{zoneId}}", "count"]
            },
            "description": "Get current occupancy count for a zone."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Staff",
      "description": "Staff management endpoints",
      "item": [
        {
          "name": "List Staff Members",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}/staff?role=SECURITY&page=1&limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}", "staff"],
              "query": [
                {
                  "key": "role",
                  "value": "SECURITY"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            },
            "description": "List all staff members for a festival."
          },
          "response": []
        },
        {
          "name": "Add Staff Member",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"role\": \"SECURITY\",\n  \"zones\": [\"{{zoneId}}\"],\n  \"startDate\": \"2025-07-15T00:00:00.000Z\",\n  \"endDate\": \"2025-07-17T23:59:59.000Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}/staff",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}", "staff"]
            },
            "description": "Add a staff member to a festival."
          },
          "response": []
        },
        {
          "name": "Get Shift Schedule",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}/staff/shifts?date=2025-07-15",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}", "staff", "shifts"],
              "query": [
                {
                  "key": "date",
                  "value": "2025-07-15"
                }
              ]
            },
            "description": "Get shift schedule for a specific date."
          },
          "response": []
        },
        {
          "name": "Staff Check-In",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shiftId\": \"{{shiftId}}\",\n  \"location\": {\n    \"latitude\": 48.8323,\n    \"longitude\": 2.2885\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/staff/checkin",
              "host": ["{{baseUrl}}"],
              "path": ["staff", "checkin"]
            },
            "description": "Check in for a shift."
          },
          "response": []
        },
        {
          "name": "Staff Check-Out",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shiftId\": \"{{shiftId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/staff/checkout",
              "host": ["{{baseUrl}}"],
              "path": ["staff", "checkout"]
            },
            "description": "Check out from a shift."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Notifications",
      "description": "Notification endpoints",
      "item": [
        {
          "name": "Get My Notifications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications?unreadOnly=true&page=1&limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["notifications"],
              "query": [
                {
                  "key": "unreadOnly",
                  "value": "true"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                }
              ]
            },
            "description": "Get notifications for the authenticated user."
          },
          "response": []
        },
        {
          "name": "Mark as Read",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications/{{notificationId}}/read",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "{{notificationId}}", "read"]
            },
            "description": "Mark a notification as read."
          },
          "response": []
        },
        {
          "name": "Mark All as Read",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications/read-all",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "read-all"]
            },
            "description": "Mark all notifications as read."
          },
          "response": []
        },
        {
          "name": "Register Push Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"FCM_DEVICE_TOKEN\",\n  \"platform\": \"android\",\n  \"deviceId\": \"device-unique-id\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/notifications/register-device",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "register-device"]
            },
            "description": "Register a device for push notifications."
          },
          "response": []
        },
        {
          "name": "Update Notification Settings",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": true,\n  \"push\": true,\n  \"sms\": false,\n  \"categories\": {\n    \"marketing\": false,\n    \"reminders\": true,\n    \"updates\": true\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/notifications/settings",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "settings"]
            },
            "description": "Update notification preferences."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Support",
      "description": "Support and FAQ endpoints",
      "item": [
        {
          "name": "Get FAQ",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/festivals/{{festivalId}}/support/faq",
              "host": ["{{baseUrl}}"],
              "path": ["festivals", "{{festivalId}}", "support", "faq"]
            },
            "description": "Get FAQ for a festival."
          },
          "response": []
        },
        {
          "name": "Create Support Ticket",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"festivalId\": \"{{festivalId}}\",\n  \"subject\": \"Issue with my ticket\",\n  \"message\": \"I cannot see my QR code on the ticket page.\",\n  \"category\": \"TICKETS\",\n  \"priority\": \"MEDIUM\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/support/tickets",
              "host": ["{{baseUrl}}"],
              "path": ["support", "tickets"]
            },
            "description": "Create a new support ticket."
          },
          "response": []
        },
        {
          "name": "Get My Support Tickets",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/support/tickets?status=OPEN",
              "host": ["{{baseUrl}}"],
              "path": ["support", "tickets"],
              "query": [
                {
                  "key": "status",
                  "value": "OPEN"
                }
              ]
            },
            "description": "Get support tickets for the authenticated user."
          },
          "response": []
        },
        {
          "name": "Reply to Ticket",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Thank you, that solved my issue!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/support/tickets/{{supportTicketId}}/reply",
              "host": ["{{baseUrl}}"],
              "path": ["support", "tickets", "{{supportTicketId}}", "reply"]
            },
            "description": "Reply to a support ticket."
          },
          "response": []
        },
        {
          "name": "Report Lost Item",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"festivalId\": \"{{festivalId}}\",\n  \"type\": \"LOST\",\n  \"category\": \"PHONE\",\n  \"description\": \"Black iPhone 15 Pro with blue case\",\n  \"lastSeenLocation\": \"Near Main Stage\",\n  \"lastSeenTime\": \"2025-07-15T18:30:00.000Z\",\n  \"contactPhone\": \"+33612345678\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/support/lost-items",
              "host": ["{{baseUrl}}"],
              "path": ["support", "lost-items"]
            },
            "description": "Report a lost or found item."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Webhooks",
      "description": "Webhook endpoints",
      "item": [
        {
          "name": "Stripe Webhook",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Stripe-Signature",
                "value": "t=1704201400,v1=signature_here"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"evt_123\",\n  \"type\": \"checkout.session.completed\",\n  \"data\": {\n    \"object\": {\n      \"id\": \"cs_test_123\",\n      \"amount_total\": 5000,\n      \"currency\": \"eur\",\n      \"metadata\": {\n        \"type\": \"ticket_purchase\",\n        \"festivalId\": \"{{festivalId}}\"\n      }\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/webhooks/stripe",
              "host": ["{{baseUrl}}"],
              "path": ["webhooks", "stripe"]
            },
            "description": "Stripe webhook endpoint. Used by Stripe to notify about payment events."
          },
          "response": []
        }
      ]
    }
  ]
}
