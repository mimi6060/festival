# =============================================================================
# FESTIVAL PLATFORM - PRODUCTION ENVIRONMENT TEMPLATE
# =============================================================================
# SECURITY WARNING: This is a TEMPLATE file!
# DO NOT fill in real secrets here. Use a secrets manager instead:
#   - AWS Secrets Manager
#   - HashiCorp Vault
#   - Kubernetes Secrets
#   - Railway/Vercel environment variables
#
# Copy this template and set values via your deployment platform.
# =============================================================================

# Application
NODE_ENV=production
APP_NAME="Festival Platform"
APP_URL=https://festival-platform.com
API_URL=https://api.festival-platform.com
ADMIN_URL=https://admin.festival-platform.com
PORT=3000
API_PREFIX=api
API_VERSION=v1
DEBUG=false

# =============================================================================
# DATABASE - PostgreSQL (Managed Service Recommended)
# =============================================================================
# Use managed PostgreSQL: AWS RDS, Google Cloud SQL, Railway, Supabase, etc.
# Enable SSL/TLS in production!
DATABASE_HOST=${DATABASE_HOST}
DATABASE_PORT=5432
DATABASE_NAME=${DATABASE_NAME}
DATABASE_USER=${DATABASE_USER}
DATABASE_PASSWORD=${DATABASE_PASSWORD}
DATABASE_URL=${DATABASE_URL}
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20
DATABASE_CONNECTION_TIMEOUT=30000
DATABASE_SSL_ENABLED=true
DATABASE_SSL_REJECT_UNAUTHORIZED=true

# =============================================================================
# REDIS - Cache & Session Store (Managed Service Recommended)
# =============================================================================
# Use managed Redis: AWS ElastiCache, Redis Cloud, Upstash, etc.
REDIS_HOST=${REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_TLS_ENABLED=true
REDIS_URL=${REDIS_URL}
CACHE_TTL=3600
CACHE_MAX_ITEMS=100000

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
# CRITICAL: Generate strong secrets!
# Use: openssl rand -base64 64
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=${JWT_REFRESH_SECRET}
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=festival-api
JWT_AUDIENCE=festival-app
JWT_ALGORITHM=HS256
BCRYPT_SALT_ROUNDS=12
SESSION_SECRET=${SESSION_SECRET}

# =============================================================================
# STRIPE PAYMENTS (Live Keys)
# =============================================================================
# CRITICAL: Use LIVE keys, not test keys!
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}
STRIPE_CURRENCY=eur
STRIPE_CONNECT_ENABLED=true
STRIPE_CONNECT_CLIENT_ID=${STRIPE_CONNECT_CLIENT_ID}

# =============================================================================
# EMAIL - SMTP (Production Provider)
# =============================================================================
# Recommended: SendGrid, AWS SES, Mailgun, Postmark
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=${SMTP_USER}
SMTP_PASSWORD=${SMTP_PASSWORD}
SMTP_FROM_NAME="Festival Platform"
SMTP_FROM_EMAIL=noreply@festival-platform.com
SMTP_REPLY_TO=support@festival-platform.com
EMAIL_QUEUE_ENABLED=true
EMAIL_MAX_RETRIES=3

# =============================================================================
# FILE STORAGE - AWS S3
# =============================================================================
STORAGE_TYPE=s3
AWS_REGION=${AWS_REGION}
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_S3_BUCKET=${AWS_S3_BUCKET}
AWS_S3_PUBLIC_URL=https://${AWS_S3_BUCKET}.s3.${AWS_REGION}.amazonaws.com
UPLOAD_MAX_SIZE=10485760
UPLOAD_MAX_IMAGE_SIZE=5242880
AWS_SIGNED_URL_EXPIRY=3600

# =============================================================================
# PUSH NOTIFICATIONS
# =============================================================================
# Firebase Cloud Messaging
FIREBASE_ENABLED=true
FIREBASE_PROJECT_ID=${FIREBASE_PROJECT_ID}
FIREBASE_PRIVATE_KEY=${FIREBASE_PRIVATE_KEY}
FIREBASE_CLIENT_EMAIL=${FIREBASE_CLIENT_EMAIL}
FIREBASE_DATABASE_URL=https://${FIREBASE_PROJECT_ID}.firebaseio.com

# Apple Push Notifications
APNS_ENABLED=true
APNS_KEY_ID=${APNS_KEY_ID}
APNS_TEAM_ID=${APNS_TEAM_ID}
APNS_BUNDLE_ID=com.festival-platform.app
APNS_PRODUCTION=true

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# Sentry - Error Tracking (REQUIRED for production)
SENTRY_ENABLED=true
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Google Maps
GOOGLE_MAPS_API_KEY=${GOOGLE_MAPS_API_KEY}

# Twilio SMS
TWILIO_ENABLED=true
TWILIO_ACCOUNT_SID=${TWILIO_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${TWILIO_AUTH_TOKEN}
TWILIO_PHONE_NUMBER=${TWILIO_PHONE_NUMBER}

# =============================================================================
# SECURITY
# =============================================================================
# CORS - List all production domains
CORS_ORIGINS=https://festival-platform.com,https://admin.festival-platform.com,https://app.festival-platform.com

# Rate Limiting (Strict in production)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
THROTTLE_TTL=60
THROTTLE_LIMIT=10

# CSRF Protection
CSRF_ENABLED=true
CSRF_SECRET=${CSRF_SECRET}

# Encryption
QR_SECRET=${QR_SECRET}
ENCRYPTION_KEY=${ENCRYPTION_KEY}

# =============================================================================
# LOGGING & MONITORING
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_DIR=/var/log/festival
LOG_RETENTION_DAYS=90
LOG_REQUESTS=true
LOG_RESPONSES=false
LOG_BODY=false

# Prometheus Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_REGISTRATION_ENABLED=true
FEATURE_PAYMENT_ENABLED=true
FEATURE_CASHLESS_ENABLED=true
FEATURE_PUSH_NOTIFICATIONS_ENABLED=true
FEATURE_SMS_NOTIFICATIONS_ENABLED=true
FEATURE_OAUTH_ENABLED=true
FEATURE_API_DOCS_ENABLED=false
FEATURE_GRAPHQL_ENABLED=false

# =============================================================================
# QUEUE & WORKERS
# =============================================================================
QUEUE_ENABLED=true
QUEUE_DEFAULT_JOB_OPTIONS_ATTEMPTS=3
QUEUE_DEFAULT_JOB_OPTIONS_BACKOFF=5000
QUEUE_DEFAULT_JOB_OPTIONS_REMOVE_ON_COMPLETE=true
QUEUE_DEFAULT_JOB_OPTIONS_REMOVE_ON_FAIL=false

# =============================================================================
# ADMIN
# =============================================================================
# Set via secrets manager - DO NOT hardcode!
ADMIN_EMAIL=${ADMIN_EMAIL}
ADMIN_PASSWORD=${ADMIN_PASSWORD}
ADMIN_FIRST_NAME=Admin
ADMIN_LAST_NAME=System

# =============================================================================
# DOCUMENTATION
# =============================================================================
# Disabled in production for security
SWAGGER_ENABLED=false
