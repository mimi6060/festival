{{!--
  Password Reset Template
  Sent when user requests a password reset

  Variables:
  - userName: User's first name or full name
  - resetUrl: URL to reset password
  - expiresIn: Expiration time (e.g., "1 heure" / "1 hour")
  - ipAddress: IP address of the request (optional)
  - userAgent: Browser/device info (optional)
  - requestedAt: Date/time of request
  - lang_fr: Boolean for French language
  - primaryColor: Brand primary color
  - All common variables from layout
--}}

{{#if lang_fr}}
<!-- French Version -->
<h1 style="margin: 0 0 20px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 28px; font-weight: 700; color: #1a1a2e; line-height: 36px;">
  Reinitialisation de mot de passe
</h1>

<p style="margin: 0 0 20px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 16px; color: #4a4a4a; line-height: 26px;">
  Bonjour {{userName}},
</p>

<p style="margin: 0 0 25px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 16px; color: #4a4a4a; line-height: 26px;">
  Nous avons recu une demande de reinitialisation de votre mot de passe pour votre compte <strong>{{festivalName}}</strong>. Cliquez sur le bouton ci-dessous pour creer un nouveau mot de passe.
</p>

{{> button
  url=resetUrl
  text="Reinitialiser mon mot de passe"
  align="center"
  showFallback=true
}}

{{> alert
  type_warning=true
  icon="&#128274;"
  title="Important"
  message="Ce lien est valable pendant <strong>" expiresIn "</strong>. Passe ce delai, vous devrez effectuer une nouvelle demande."
}}

{{#if ipAddress}}
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin: 25px 0; padding: 20px; background-color: #f8f9fa; border-radius: 8px;">
  <tr>
    <td>
      <h3 style="margin: 0 0 15px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; font-weight: 600; color: #1a1a2e;">
        Details de la demande
      </h3>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="padding: 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 13px; color: #8c8c8c; width: 100px;">
            Date :
          </td>
          <td style="padding: 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 13px; color: #4a4a4a;">
            {{requestedAt}}
          </td>
        </tr>
        <tr>
          <td style="padding: 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 13px; color: #8c8c8c;">
            IP :
          </td>
          <td style="padding: 5px 0; font-family: 'Courier New', monospace; font-size: 13px; color: #4a4a4a;">
            {{ipAddress}}
          </td>
        </tr>
        {{#if userAgent}}
        <tr>
          <td style="padding: 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 13px; color: #8c8c8c;">
            Appareil :
          </td>
          <td style="padding: 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 13px; color: #4a4a4a;">
            {{userAgent}}
          </td>
        </tr>
        {{/if}}
      </table>
    </td>
  </tr>
</table>
{{/if}}

{{> alert
  type_error=true
  icon="&#9888;"
  title="Vous n'avez pas fait cette demande ?"
  message="Si vous n'avez pas demande de reinitialisation de mot de passe, ignorez cet email. Votre mot de passe restera inchange. Si vous pensez que quelqu'un tente d'acceder a votre compte, <a href='mailto:" supportEmail "' style='color: #721c24;'>contactez notre support</a>."
}}

{{else}}
<!-- English Version -->
<h1 style="margin: 0 0 20px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 28px; font-weight: 700; color: #1a1a2e; line-height: 36px;">
  Password Reset
</h1>

<p style="margin: 0 0 20px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 16px; color: #4a4a4a; line-height: 26px;">
  Hi {{userName}},
</p>

<p style="margin: 0 0 25px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 16px; color: #4a4a4a; line-height: 26px;">
  We received a request to reset your password for your <strong>{{festivalName}}</strong> account. Click the button below to create a new password.
</p>

{{> button
  url=resetUrl
  text="Reset my password"
  align="center"
  showFallback=true
}}

{{> alert
  type_warning=true
  icon="&#128274;"
  title="Important"
  message="This link is valid for <strong>" expiresIn "</strong>. After that, you'll need to submit a new request."
}}

{{#if ipAddress}}
<table border="0" cellpadding="0" cellspacing="0" width="100%" style="margin: 25px 0; padding: 20px; background-color: #f8f9fa; border-radius: 8px;">
  <tr>
    <td>
      <h3 style="margin: 0 0 15px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 14px; font-weight: 600; color: #1a1a2e;">
        Request details
      </h3>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td style="padding: 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 13px; color: #8c8c8c; width: 100px;">
            Date:
          </td>
          <td style="padding: 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 13px; color: #4a4a4a;">
            {{requestedAt}}
          </td>
        </tr>
        <tr>
          <td style="padding: 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 13px; color: #8c8c8c;">
            IP:
          </td>
          <td style="padding: 5px 0; font-family: 'Courier New', monospace; font-size: 13px; color: #4a4a4a;">
            {{ipAddress}}
          </td>
        </tr>
        {{#if userAgent}}
        <tr>
          <td style="padding: 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 13px; color: #8c8c8c;">
            Device:
          </td>
          <td style="padding: 5px 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 13px; color: #4a4a4a;">
            {{userAgent}}
          </td>
        </tr>
        {{/if}}
      </table>
    </td>
  </tr>
</table>
{{/if}}

{{> alert
  type_error=true
  icon="&#9888;"
  title="Didn't request this?"
  message="If you didn't request a password reset, please ignore this email. Your password will remain unchanged. If you believe someone is trying to access your account, <a href='mailto:" supportEmail "' style='color: #721c24;'>contact our support team</a>."
}}
{{/if}}
