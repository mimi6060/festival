---
# Let's Encrypt Production Issuer
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-prod
  labels:
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/component: issuer
    app.kubernetes.io/part-of: festival-platform
spec:
  acme:
    server: https://acme-v02.api.letsencrypt.org/directory
    email: admin@festival.example.com
    privateKeySecretRef:
      name: letsencrypt-prod-account-key
    solvers:
      # HTTP-01 solver for standard domains
      - http01:
          ingress:
            class: nginx
        selector:
          dnsZones:
            - "festival.example.com"
      # DNS-01 solver for wildcard certificates (requires cloud provider)
      # Uncomment and configure for your DNS provider
      # - dns01:
      #     cloudflare:
      #       email: admin@festival.example.com
      #       apiKeySecretRef:
      #         name: cloudflare-api-key
      #         key: api-key
      #   selector:
      #     dnsZones:
      #       - "festival.example.com"
---
# Let's Encrypt Staging Issuer (for testing)
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-staging
  labels:
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/component: issuer
    app.kubernetes.io/part-of: festival-platform
spec:
  acme:
    server: https://acme-staging-v02.api.letsencrypt.org/directory
    email: admin@festival.example.com
    privateKeySecretRef:
      name: letsencrypt-staging-account-key
    solvers:
      - http01:
          ingress:
            class: nginx
---
# Self-signed issuer for internal services
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: selfsigned-issuer
  labels:
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/component: issuer
    app.kubernetes.io/part-of: festival-platform
spec:
  selfSigned: {}
---
# CA Issuer for internal mTLS
apiVersion: cert-manager.io/v1
kind: Issuer
metadata:
  name: festival-ca-issuer
  namespace: festival
  labels:
    app.kubernetes.io/name: cert-manager
    app.kubernetes.io/component: issuer
    app.kubernetes.io/part-of: festival-platform
spec:
  ca:
    secretName: festival-ca-secret
