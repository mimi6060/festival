apiVersion: v1
kind: ConfigMap
metadata:
  name: api-config
  namespace: festival
  labels:
    app.kubernetes.io/name: api
    app.kubernetes.io/component: backend
    app.kubernetes.io/part-of: festival-platform
data:
  # Application Configuration
  NODE_ENV: "production"
  PORT: "3000"
  API_PREFIX: "/api/v1"

  # Database Configuration
  DB_HOST: "postgresql.festival.svc.cluster.local"
  DB_PORT: "5432"
  DB_NAME: "festival"
  DB_SSL: "true"
  DB_POOL_MIN: "5"
  DB_POOL_MAX: "20"

  # Redis Configuration
  REDIS_HOST: "redis.festival.svc.cluster.local"
  REDIS_PORT: "6379"
  REDIS_DB: "0"

  # JWT Configuration
  JWT_EXPIRES_IN: "15m"
  JWT_REFRESH_EXPIRES_IN: "7d"

  # Rate Limiting
  RATE_LIMIT_TTL: "60"
  RATE_LIMIT_MAX: "100"

  # Logging
  LOG_LEVEL: "info"
  LOG_FORMAT: "json"

  # CORS
  CORS_ORIGINS: "https://festival.example.com,https://admin.festival.example.com"

  # Feature Flags
  ENABLE_SWAGGER: "false"
  ENABLE_METRICS: "true"
  ENABLE_HEALTH_CHECK: "true"

  # Queue Configuration
  QUEUE_PREFIX: "festival"
  QUEUE_CONCURRENCY: "10"

  # File Upload
  MAX_FILE_SIZE: "10485760"
  ALLOWED_FILE_TYPES: "image/jpeg,image/png,application/pdf"

  # Cashless Configuration
  CASHLESS_CURRENCY: "EUR"
  CASHLESS_MAX_BALANCE: "1000"
  CASHLESS_MIN_TOPUP: "5"
