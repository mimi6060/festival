---
# Template for Sealed Secrets
# To create a sealed secret, use:
# kubeseal --format=yaml --cert=sealed-secrets-cert.pem < api-secrets-plain.yaml > api-secrets-sealed.yaml
---
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: api-secrets
  namespace: festival
  labels:
    app.kubernetes.io/name: api
    app.kubernetes.io/component: backend
    app.kubernetes.io/part-of: festival-platform
spec:
  encryptedData:
    # Base64 encoded secrets that will be encrypted by sealed-secrets
    # Replace these with actual sealed values after encryption
    DATABASE_URL: AgBxxxxx  # postgresql://user:password@host:5432/festival
    REDIS_URL: AgBxxxxx  # redis://:password@host:6379/0
    JWT_SECRET: AgBxxxxx  # Your JWT secret key
    JWT_REFRESH_SECRET: AgBxxxxx  # Your JWT refresh secret key
    ENCRYPTION_KEY: AgBxxxxx  # AES-256 encryption key for sensitive data
    STRIPE_SECRET_KEY: AgBxxxxx  # Stripe API secret key
    STRIPE_WEBHOOK_SECRET: AgBxxxxx  # Stripe webhook signing secret
    SENDGRID_API_KEY: AgBxxxxx  # SendGrid API key for emails
    AWS_ACCESS_KEY_ID: AgBxxxxx  # AWS access key
    AWS_SECRET_ACCESS_KEY: AgBxxxxx  # AWS secret key
    SENTRY_DSN: AgBxxxxx  # Sentry DSN for error tracking
  template:
    metadata:
      name: api-secrets
      namespace: festival
      labels:
        app.kubernetes.io/name: api
        app.kubernetes.io/component: backend
        app.kubernetes.io/part-of: festival-platform
    type: Opaque
---
# Plain secret template (DO NOT commit with real values)
# Use this as a reference for creating sealed secrets
# apiVersion: v1
# kind: Secret
# metadata:
#   name: api-secrets
#   namespace: festival
# type: Opaque
# stringData:
#   DATABASE_URL: "postgresql://festival:password@postgresql:5432/festival?sslmode=require"
#   REDIS_URL: "redis://:password@redis:6379/0"
#   JWT_SECRET: "your-super-secret-jwt-key-min-32-chars"
#   JWT_REFRESH_SECRET: "your-super-secret-refresh-key-min-32-chars"
#   ENCRYPTION_KEY: "your-32-byte-aes-encryption-key!"
#   STRIPE_SECRET_KEY: "sk_live_xxxxx"
#   STRIPE_WEBHOOK_SECRET: "whsec_xxxxx"
#   SENDGRID_API_KEY: "SG.xxxxx"
#   AWS_ACCESS_KEY_ID: "AKIAXXXXX"
#   AWS_SECRET_ACCESS_KEY: "xxxxx"
#   SENTRY_DSN: "https://xxxxx@sentry.io/xxxxx"
